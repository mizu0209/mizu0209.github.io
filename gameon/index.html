<!DOCTYPE html>
<link rel="stylesheet" href="css/bootstrap.min.css">
<script src="js/jquery.min.js"></script>
<script src="js/instascan.min.js"></script>
<link rel="shortcut icon" type="image/png" href="favicon.png">
<title>Game-ON Fast Login</title>
<body>
    <div class="container">
        <div class="row justify-content-center mt-3">
            <div class="col-md-5">
                <div class="card-header bg-transparent mb-3"><h5 class="text-center">
                    <span class="font-weight-bold text-primary">QR Scanner</span><br><span class="badge badge-pill badge-warning">Fast Login For Hotspot gameon.id</span></h5>
                </div>
            </div>
        </div>
        <div class="card-body-center">
            <center>
                <div class="alert alert-secondary" role="alert" style="width: fit-content; height: fit-content;"> 
                    <video id="qrcode" width="700px"></video><br>
                </div>
                <div class="btn-group btn-group-toggle mb-0" data-toggle="buttons">
                    <div class="card-header bg-transparent mb-0">
                        <label class="btn btn-primary active">
                            <input type="radio" name="options" value="1" autocomplete="off" checked> Front Camera
                        </label>
                        <label class="btn btn-secondary">
                            <input type="radio" name="options" value="2" autocomplete="off"> Back Camera
                        </label>
                    </div>
                </div>
            </center>
                <p class="text-sm-center"><a class="badge badge-light">Copyright &copy; </a><a href="https://wa.me/6281234522234?text=ping" target="_blank" class="badge badge-light">MiZu</a><a class="badge badge-light">2021</a> | <a class="badge badge-light">Powered by</a> <a href="https://github.com/schmich/instascan" class="badge badge-light">Instascan</a></p>
        </div>
    </div>
    
</body>

<script type="text/javascript">
//Untuk Mengeksekusi Data yang didapat dari qr
    let scanner = new Instascan.Scanner({ video: document.getElementById('qrcode')});
    scanner.addListener('scan', function (content) {
        window.location.replace(content);
    });
    Instascan.Camera.getCameras().then(function (cameras){
		if(cameras.length>0){
			scanner.start(cameras[0]);
			$('[name="options"]').on('change',function(){
				if($(this).val()==1){
					if(cameras[0]!=""){
						scanner.start(cameras[0]);
					}else{
						alert('No Front camera found!');
					}
				}else if($(this).val()==2){
					if(cameras[1]!=""){
						scanner.start(cameras[1]);
					}else{
						alert('No Back camera found!');
					}
				}
			});
		}else{
			console.error('No cameras found.');
			alert('No cameras found.');
		}
	}).catch(function(e){
		console.error(e);
		alert(e);
	});
</script>
